let c=!1,s,d,l=6e3,i=!1,r=null;function m(e){const t=document.getElementById("spelaButton");t&&(t.disabled=!e)}function p(){if(c)return;const e=document.getElementById("gameContainer");if(!e)return;const t=document.createElement("div");t.className="tile absolute bg-green-500 text-white p-2 rounded text-lg font-bold";let n=Math.floor(Math.random()*12)+1,o=Math.floor(Math.random()*12)+1;t.textContent=`${n} * ${o}`,t.dataset.answer=(n*o).toString(),t.style.left="50%",t.style.transform="translateX(-50%)",t.style.animation=`fall ${l}ms linear forwards`,e.appendChild(t),setTimeout(()=>{!c&&t.parentNode===e&&(t.remove(),h())},l)}function I(){if(!i)return;const e=document.getElementById("answerInput");if(!e)return;const t=parseInt(e.value),n=document.querySelectorAll(".tile");if(n.length===0){e.value="",e.focus();return}const o=n[0],a=parseInt(o.dataset.answer||"0");!isNaN(t)&&t.toString().length===a.toString().length&&(a===t&&(o.remove(),E()),e.value="",e.focus())}function E(){const e=document.getElementById("score");if(e){const t=parseInt(e.textContent||"0");e.textContent=(t+1).toString()}}function h(){c=!0,i=!1,s&&clearInterval(s),d&&clearInterval(d),document.querySelectorAll(".tile").forEach(o=>{if(o instanceof HTMLElement){const a=window.getComputedStyle(o),u=parseFloat(a.top);o.style.animation="none",o.style.top=`${u}px`}});const e=document.createElement("div");e.id="gameOverOverlay",e.className="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center flex-col z-50";const t=document.createElement("h1");t.textContent="Game Over!",t.className="text-3xl font-bold text-white mb-4";const n=document.createElement("button");n.textContent="OK",n.className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",n.addEventListener("click",v),e.appendChild(t),e.appendChild(n),document.body.appendChild(e),m(!0),n.focus(),document.addEventListener("keydown",w)}function w(e){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),v())}function v(){const e=document.getElementById("gameOverOverlay");e&&e.remove(),c=!1,m(!1);const t=document.getElementById("levelSlider");t&&(r=t.value,localStorage.setItem("savedLevelValue",r)),location.reload()}function S(){const e=document.getElementById("answerInput");e&&i&&e.focus()}function x(){c=!1,i=!0;const e=document.getElementById("gameContainer");e&&(e.innerHTML=""),p(),y(),d=setInterval(S,100),m(!0)}function y(){s&&clearInterval(s),s=setInterval(p,l),console.log("Game runner updated with speed:",l)}function f(e){l=e,console.log("Speed set to:",l),i&&(y(),document.querySelectorAll(".tile").forEach(t=>{if(t instanceof HTMLElement){const n=t.offsetTop,o=t.parentElement.offsetHeight,u=(o-n)/o*l;t.style.animation=`fall ${u}ms linear forwards`}}))}function B(){document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("answerInput"),t=document.getElementById("levelSlider");r=localStorage.getItem("savedLevelValue"),r&&t&&(t.value=r,f(g(r)));const n=document.getElementById("spelaButton");n&&n.addEventListener("click",x),t&&t.addEventListener("input",o=>{const a=o.target.value;f(g(a))}),e&&e.addEventListener("keyup",I)})}function g(e){switch(e){case"1":return 6e3;case"2":return 3e3;case"3":return 2e3;case"4":return 1500;case"5":return 1200;default:return 6e3}}export{B as i};
